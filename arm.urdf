<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from src/hexapod_description/robots/arm.urdf.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="hexapod">
  <gazebo>
    <plugin filename="libgz_ros2_control-system" name="gz_ros2_control::GazeboSimROS2ControlPlugin">
      <parameters>/home/thurdparty/Code/hexapod-ros/install/hexapod_sim/share/hexapod_sim/config/hexapod_controllers.yaml</parameters>
    </plugin>
  </gazebo>
  <!-- Init colour -->
  <material name="TPU">
    <color rgba="0.3 0.3 0.3 1.0"/>
  </material>
  <material name="PLA">
    <color rgba="0.3 0.3 0.3 1.0"/>
  </material>
  <!-- =============== Link & Joint =============== -->
  <!-- Base -->
  <link name="base_link"/>
  <!-- Joints -->
  <joint name="arm_base_mount_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.025588 -0.019423 0.0449"/>
    <parent link="base_link"/>
    <child link="arm_base"/>
  </joint>
  <joint name="arm_rotator_joint" type="continuous">
    <origin rpy="0 0 0" xyz="8.8e-05 0.019999 0.02995"/>
    <parent link="arm_base"/>
    <child link="arm_rotator"/>
    <axis xyz="0.0 -0.0 -1.0"/>
    <limit effort="100" lower="-1.570796" upper="1.570796" velocity="100"/>
  </joint>
  <joint name="arm_abductor_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.014582 0.00069 0.013923"/>
    <parent link="arm_rotator"/>
    <child link="arm_abductor"/>
    <axis xyz="-1.0 0.0 -0.0"/>
    <limit effort="100" lower="-1.570796" upper="1.570796" velocity="100"/>
  </joint>
  <joint name="arm_retractor_joint" type="revolute">
    <origin rpy="0 0 0" xyz="-0.000401 0.0 0.046709"/>
    <parent link="arm_abductor"/>
    <child link="arm_retractor"/>
    <axis xyz="-0.999993 0.0 -0.003676"/>
     p 
    <limit effort="100" lower="-1.570796" upper="1.570796" velocity="100"/>
  </joint>
  <!-- Links -->
  <link name="arm_rotator">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.00046642883527773724 0.0027188082250819237 0.00576546998065737"/>
      <mass value="0.02623546025799875"/>
      <inertia ixx="4e-06" ixy="0.0" ixz="0.0" iyy="4e-06" iyz="-0.0" izz="5e-06"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="-0.025676 -0.000576 -0.07485"/>
      <geometry>
        <mesh filename="file:///home/thurdparty/Code/hexapod-ros/install/hexapod_description/share/hexapod_description/meshes/visual/rotator.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="PLA"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="-0.025676 -0.000576 -0.07485"/>
      <geometry>
        <mesh filename="file:///home/thurdparty/Code/hexapod-ros/install/hexapod_description/share/hexapod_description/meshes/collision/rotator.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <link name="arm_abductor">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.014167725035919117 3.5639852713031765e-07 0.031090662760010462"/>
      <mass value="0.016534189067873267"/>
      <inertia ixx="5e-06" ixy="-0.0" ixz="1e-06" iyy="7e-06" iyz="-0.0" izz="2e-06"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="-0.040258 -0.001266 -0.088773"/>
      <geometry>
        <mesh filename="file:///home/thurdparty/Code/hexapod-ros/install/hexapod_description/share/hexapod_description/meshes/visual/abductor.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="PLA"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="-0.040258 -0.001266 -0.088773"/>
      <geometry>
        <mesh filename="file:///home/thurdparty/Code/hexapod-ros/install/hexapod_description/share/hexapod_description/meshes/collision/abductor.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <link name="arm_retractor">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.011027322351092845 -5.220911472792085e-05 0.023364114206742087"/>
      <mass value="0.015328010788351278"/>
      <inertia ixx="3e-06" ixy="0.0" ixz="-0.0" iyy="5e-06" iyz="0.0" izz="4e-06"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="-0.039857 -0.001266 -0.135482"/>
      <geometry>
        <mesh filename="file:///home/thurdparty/Code/hexapod-ros/install/hexapod_description/share/hexapod_description/meshes/visual/retractor.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="PLA"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="-0.039857 -0.001266 -0.135482"/>
      <geometry>
        <mesh filename="file:///home/thurdparty/Code/hexapod-ros/install/hexapod_description/share/hexapod_description/meshes/collision/retractor.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <link name="arm_base">
    <inertial>
      <origin rpy="0 0 0" xyz="0.004115093716825637 0.020000308654227843 0.01035421864114821"/>
      <mass value="0.014628769254330782"/>
      <inertia ixx="2e-06" ixy="0.0" ixz="-0.0" iyy="3e-06" iyz="0.0" izz="2e-06"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="-0.025588 0.019423 -0.0449"/>
      <geometry>
        <mesh filename="file:///home/thurdparty/Code/hexapod-ros/install/hexapod_description/share/hexapod_description/meshes/visual/base.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="PLA"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="-0.025588 0.019423 -0.0449"/>
      <geometry>
        <mesh filename="file:///home/thurdparty/Code/hexapod-ros/install/hexapod_description/share/hexapod_description/meshes/collision/base.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <!-- Joints -->
  <joint name="camera_case_cover_joint" type="fixed">
    <origin rpy="0 -1.5707963267948966 -1.5707963267948966" xyz="-0.0125 0.0 0.055"/>
    <parent link="arm_retractor"/>
    <child link="camera_case_cover"/>
  </joint>
  <!-- Joints -->
  <joint name="depth_camera_link_joint" type="fixed">
    <origin rpy="0 -1.5707963267948966 -1.5707963267948966" xyz="-0.0125 0.0 0.055"/>
    <parent link="arm_retractor"/>
    <child link="depth_camera_link"/>
  </joint>
  <!-- Links -->
  <link name="camera_case_cover">
    <inertial>
      <origin rpy="0 0 0" xyz="0.07257325961305607 0.023187735063927437 0.09454807900867684"/>
      <mass value="0.00672643608404174"/>
      <inertia ixx="1e-06" ixy="0.0" ixz="0.0" iyy="2e-06" iyz="0.0" izz="3e-06"/>
    </inertial>
    <visual>
      <origin rpy="1.5707963267948966 0 1.5707963267948966" xyz="-0.185 -0.0275 0.0"/>
      <geometry>
        <mesh filename="file:///home/thurdparty/Code/hexapod-ros/install/hexapod_description/share/hexapod_description/meshes/visual/camera_case_cover.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="PLA"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0.041999 0.020484 -0.080935"/>
      <geometry>
        <mesh filename="file:///home/thurdparty/Code/hexapod-ros/install/hexapod_description/share/hexapod_description/meshes/collision/camera_case_cover.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <!-- Links -->
  <link name="depth_camera_link">
    <visual>
      <origin rpy="0 0 0" xyz="-0.0125 0.0025 -0.0"/>
      <geometry>
        <box size="0.01 0.04 0.03"/>
      </geometry>
    </visual>
  </link>
  <!-- Joints -->
  <joint name="depth_camera_optical_joint" type="fixed">
    <origin rpy="-1.5707963267948966 0 -1.5707963267948966" xyz="0.0 0.0 0.0"/>
    <parent link="depth_camera_link"/>
    <child link="depth_camera_optical_frame"/>
  </joint>
  <link name="depth_camera_optical_frame">
    </link>
  <!-- Gazebo -->
  <gazebo reference="depth_camera_link">
    <sensor name="depth_camera_link" type="depth_camera">
      <always_on>true</always_on>
      <visualize>true</visualize>
      <update_rate>100</update_rate>
      <!-- Max FPS according to spec -->
      <topic>depth_camera/depth/image_raw</topic>
      <gz_frame_id>depth_camera_optical_frame</gz_frame_id>
      <camera name="Sipeed_MaixSense_A010">
        <camera_info_topic>depth_camera/depth/camera_info</camera_info_topic>
        <horizontal_fov>1.0472</horizontal_fov>
        <!-- Approx. 60 degrees in radians -->
        <image>
          <width>100</width>
          <!-- As specified: 100x100 depth resolution -->
          <height>100</height>
          <format>R_FLOAT32</format>
          <!-- Float32 is good for depth -->
        </image>
        <clip>
          <near>0.05</near>
          <!-- Minimum range is 5cm -->
          <far>3.0</far>
          <!-- Max range is 3m -->
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.01</stddev>
          <!-- Adjusted to simulate real sensor noise -->
        </noise>
      </camera>
    </sensor>
  </gazebo>
  <!-- =============== Gazebo =============== -->
  <gazebo>
    <plugin filename="gz-sim-sensors-system" name="gz::sim::systems::Sensors">
      <render_engine>ogre2</render_engine>
    </plugin>
  </gazebo>
  <ros2_control name="FakeSystem" type="system">
    <hardware>
      <plugin>gz_ros2_control/GazeboSimSystem</plugin>
    </hardware>
    <joint name="arm_rotator_joint">
      <command_interface name="position">
        <param name="min">-1.5</param>
        <param name="max">1.5</param>
        <!-- <param name="initial_value">${initial_positions['top_left_rotate_joint']}</param> -->
      </command_interface>
      <state_interface name="position"/>
    </joint>
    <joint name="arm_abductor_joint">
      <command_interface name="position">
        <param name="min">-1.5</param>
        <param name="max">1.5</param>
        <!-- <param name="initial_value">${initial_positions['top_left_rotate_joint']}</param> -->
      </command_interface>
      <state_interface name="position"/>
    </joint>
    <joint name="arm_retractor_joint">
      <command_interface name="position">
        <param name="min">-1.5</param>
        <param name="max">1.5</param>
        <!-- <param name="initial_value">${initial_positions['top_left_rotate_joint']}</param> -->
      </command_interface>
      <state_interface name="position"/>
    </joint>
  </ros2_control>
</robot>
